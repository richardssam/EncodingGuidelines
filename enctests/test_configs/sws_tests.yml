

test_sws_444:
  app: ffmpeg
  comparisontest:
  - extracttemplate: ffmpeg -y -i {newfile} -compression_level 10 -pred mixed -sws_flags area+accurate_rnd -pix_fmt rgb48be -frames:v 1 -vf scale=in_color_matrix=bt709:out_color_matrix=bt709 {newpngfile}
    testtype: idiff
  - testtype: assertresults
    tests:
    - assert: less
      value: max_error
      less: 0.00195
  description: SWS tests.
  encoding_template: ffmpeg -y {input_args} -i "{source}"              {encoding_args}
    -y "{outfile}"
  name: test_sws_444
  sources:
  - ../sourceimages/smptehdbars_16.png.yml
  suffix: .y4m
  wedges:
    16bit_default:
      -strict: -1
      -loglevel: verbose
      -sws_flags: print_info
      -pix_fmt: yuv444p16le
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=tv:out_color_matrix=bt709"'
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709
    spline:  &base_args
      -strict: -1
      -loglevel: verbose
      -sws_flags: spline+accurate_rnd+full_chroma_int+full_chroma_inp+print_info
      -pix_fmt: yuv444p16le
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=tv:out_color_matrix=bt709"'
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709
    area:
      << : *base_args
      -sws_flags: area+print_info
    lanczos:
      << : *base_args
      -sws_flags: lanczos+print_info
    bicubic:
      << : *base_args
      -sws_flags: bicubic+print_info



test_sws_d:
  app: ffmpeg
  comparisontest:
  - extracttemplate: ffmpeg -y -i {newfile} -compression_level 10 -pred mixed -sws_flags print_info -pix_fmt rgb48be -frames:v 1 -vf scale=in_color_matrix=bt709:out_color_matrix=bt709 {newpngfile}
    testtype: idiff
  - testtype: assertresults
    tests:
    - assert: less
      value: max_error
      less: 0.00195
  description: SWS tests.
  encoding_template: ffmpeg -y {input_args} -i "{source}"              {encoding_args}
    -y "{outfile}"
  name: test_sws_d
  sources:
  #- ../sourceimages/chip-chart-1080-16bit-noicc.png.yml
  #- ../sourceimages/chip-chart-1080-noicc.png.yml
  - ../sourceimages/smptehdbars_10.dpx.yml
  suffix: .y4m
  wedges:
    10bit_default: &base_args2
      -strict: -1
      -loglevel: verbose
      -sws_flags: print_info
      -pix_fmt: yuv422p10le
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=tv:out_color_matrix=bt709"'
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709

test_sws_s:
  app: ffmpeg
  comparisontest:
  - extracttemplate: ffmpeg -y -i {newfile} -compression_level 10 -pred mixed -sws_flags spline+accurate_rnd -pix_fmt rgb48be -frames:v 1 -vf scale=in_color_matrix=bt709:out_color_matrix=bt709 {newpngfile}
    testtype: idiff
  - testtype: assertresults
    tests:
    - assert: less
      value: max_error
      less: 0.00195
  description: SWS tests.
  encoding_template: ffmpeg -y {input_args} -i "{source}"              {encoding_args}
    -y "{outfile}"
  name: test_sws_s
  sources:
  #- ../sourceimages/chip-chart-1080-16bit-noicc.png.yml
  #- ../sourceimages/chip-chart-1080-noicc.png.yml
  - ../sourceimages/smptehdbars_10.dpx.yml
  suffix: .y4m
  wedges:
    spline: 
      -strict: -1
      -loglevel: verbose
      -sws_flags: spline+print_info
      -pix_fmt: yuv422p10le
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=tv:out_color_matrix=bt709"'
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709


test_sws_422_a:
  app: ffmpeg
  comparisontest:
  - extracttemplate: ffmpeg -y -i {newfile} -compression_level 10 -pred mixed -sws_flags area -pix_fmt rgb48be -frames:v 1 -vf scale=in_color_matrix=bt709:out_color_matrix=bt709 {newpngfile}
    testtype: idiff
  - testtype: assertresults
    tests:
    - assert: less
      value: max_error
      less: 0.00195
  description: SWS tests.
  encoding_template: ffmpeg -y {input_args} -i "{source}"              {encoding_args}
    -y "{outfile}"
  name: test_sws
  sources:
  #- ../sourceimages/chip-chart-1080-16bit-noicc.png.yml
  #- ../sourceimages/chip-chart-1080-noicc.png.yml
  - ../sourceimages/smptehdbars_10.dpx.yml
  suffix: .y4m
  wedges:
    area: 
      -strict: -1
      -loglevel: verbose
      -sws_flags: area+print_info
      -pix_fmt: yuv422p10le
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=tv:out_color_matrix=bt709"'
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709

test_sws_422_b:
  app: ffmpeg
  comparisontest:
  - extracttemplate: ffmpeg -y -i {newfile} -compression_level 10 -pred mixed -sws_flags bicubic -pix_fmt rgb48be -frames:v 1 -vf scale=in_color_matrix=bt709:out_color_matrix=bt709 {newpngfile}
    testtype: idiff
  - testtype: assertresults
    tests:
    - assert: less
      value: max_error
      less: 0.00195
  description: SWS tests.
  encoding_template: ffmpeg -y {input_args} -i "{source}"              {encoding_args}
    -y "{outfile}"
  name: test_sws
  sources:
  #- ../sourceimages/chip-chart-1080-16bit-noicc.png.yml
  #- ../sourceimages/chip-chart-1080-noicc.png.yml
  - ../sourceimages/smptehdbars_10.dpx.yml
  suffix: .y4m
  wedges:
    bicubic: 
      -strict: -1
      -loglevel: verbose
      -sws_flags: bicubic+print_info
      -pix_fmt: yuv422p10le
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=tv:out_color_matrix=bt709"'
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709

test_sws_422_l:
  app: ffmpeg
  comparisontest:
  - extracttemplate: ffmpeg -y -i {newfile} -compression_level 10 -pred mixed -sws_flags lanczos -pix_fmt rgb48be -frames:v 1 -vf scale=in_color_matrix=bt709:out_color_matrix=bt709 {newpngfile}
    testtype: idiff
  - testtype: assertresults
    tests:
    - assert: less
      value: max_error
      less: 0.00195
  description: SWS tests.
  encoding_template: ffmpeg -y {input_args} -i "{source}"              {encoding_args}
    -y "{outfile}"
  name: test_sws
  sources:
  #- ../sourceimages/chip-chart-1080-16bit-noicc.png.yml
  #- ../sourceimages/chip-chart-1080-noicc.png.yml
  - ../sourceimages/smptehdbars_10.dpx.yml
  suffix: .y4m
  wedges:
    lanczos: 
      -strict: -1
      -loglevel: verbose
      -sws_flags: lanczos+print_info
      -pix_fmt: yuv422p10le
      -vf: '"scale=in_range=full:in_color_matrix=bt709:out_range=tv:out_color_matrix=bt709"'
      -color_primaries: bt709
      -color_range: tv
      -color_trc: bt709
      -colorspace: bt709

---
reports:
  description: This is testing different sws_flags
  directory: sws-encode
  name: sws-tests
  templatefile: colorweb.html.jinja
  title: Ffmpeg Filter options
